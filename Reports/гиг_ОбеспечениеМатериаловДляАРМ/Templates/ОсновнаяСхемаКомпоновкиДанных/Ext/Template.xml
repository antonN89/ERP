<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИсточникДанных1</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetQuery">
		<name>НаборДанных1</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>Номенклатура</dataPath>
			<field>Номенклатура</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Характеристика</dataPath>
			<field>Характеристика</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Склад</dataPath>
			<field>Склад</field>
			<role>
				<dcscom:ignoreNullValues>true</dcscom:ignoreNullValues>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Этап</dataPath>
			<field>Этап</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Этап</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Заказ</dataPath>
			<field>Заказ</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Заказ</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоТребуется</dataPath>
			<field>КоличествоТребуется</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Требуется</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоНаСкладеПоставщика</dataPath>
			<field>КоличествоНаСкладеПоставщика</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Количество на складе поставщика</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоОстаток</dataPath>
			<field>КоличествоОстаток</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Остаток</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СпособОбеспеченияПотребностейСрокИсполненияЗаказа</dataPath>
			<field>СпособОбеспеченияПотребностейСрокИсполненияЗаказа</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Дата обеспечения (min)</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ДФ=dd.MM.yyyy</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СпособОбеспеченияПотребностейГарантированныйСрокОтгрузки</dataPath>
			<field>СпособОбеспеченияПотребностейГарантированныйСрокОтгрузки</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Дата обеспечения (max)</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ДФ=dd.MM.yyyy</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СтатьяКалькуляции</dataPath>
			<field>СтатьяКалькуляции</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДнейПоставкиМин</dataPath>
			<field>ДнейПоставкиМин</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Дней поставки мин</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧЦ=3</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДнейПоставкиМакс</dataPath>
			<field>ДнейПоставкиМакс</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Дней поставки макс</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧЦ=3</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НеограниченныйЗапас</dataPath>
			<field>НеограниченныйЗапас</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Неограниченный запас</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Приоритет</dataPath>
			<field>Приоритет</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Приоритет схемы</v8:content>
				</v8:item>
			</title>
			<orderExpression>
				<dcscom:expression>Приоритет</dcscom:expression>
				<dcscom:orderType>Asc</dcscom:orderType>
				<dcscom:autoOrder>true</dcscom:autoOrder>
			</orderExpression>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ
	ЭтапПроизводства2_2ОбеспечениеМатериаламиИРаботами.Номенклатура КАК Номенклатура,
	ЭтапПроизводства2_2ОбеспечениеМатериаламиИРаботами.Характеристика КАК Характеристика,
	ЭтапПроизводства2_2ОбеспечениеМатериаламиИРаботами.Склад КАК Склад,
	ЭтапПроизводства2_2ОбеспечениеМатериаламиИРаботами.КоличествоУпаковок КАК КоличествоУпаковок,
	ЭтапПроизводства2_2ОбеспечениеМатериаламиИРаботами.Ссылка КАК Этап,
	ЭтапПроизводства2_2ОбеспечениеМатериаламиИРаботами.Ссылка.Распоряжение КАК Заказ,
	ЭтапПроизводства2_2ОбеспечениеМатериаламиИРаботами.СтатьяКалькуляции КАК СтатьяКалькуляции,
	ЭтапПроизводства2_2ОбеспечениеМатериаламиИРаботами.Ссылка.Подразделение КАК Подразделение
ПОМЕСТИТЬ ВТ_материалыЭтапа
ИЗ
	Документ.ЭтапПроизводства2_2.ОбеспечениеМатериаламиИРаботами КАК ЭтапПроизводства2_2ОбеспечениеМатериаламиИРаботами
ГДЕ
	ЭтапПроизводства2_2ОбеспечениеМатериаламиИРаботами.Ссылка В(&amp;СписокЗаказов)
	И ЭтапПроизводства2_2ОбеспечениеМатериаламиИРаботами.ВариантОбеспечения В (ЗНАЧЕНИЕ(Перечисление.ВариантыОбеспечения.Требуется), ЗНАЧЕНИЕ(Перечисление.ВариантыОбеспечения.Обособленно))

СГРУППИРОВАТЬ ПО
	ЭтапПроизводства2_2ОбеспечениеМатериаламиИРаботами.Номенклатура,
	ЭтапПроизводства2_2ОбеспечениеМатериаламиИРаботами.Характеристика,
	ЭтапПроизводства2_2ОбеспечениеМатериаламиИРаботами.Склад,
	ЭтапПроизводства2_2ОбеспечениеМатериаламиИРаботами.КоличествоУпаковок,
	ЭтапПроизводства2_2ОбеспечениеМатериаламиИРаботами.Ссылка,
	ЭтапПроизводства2_2ОбеспечениеМатериаламиИРаботами.Ссылка.Распоряжение,
	ЭтапПроизводства2_2ОбеспечениеМатериаламиИРаботами.СтатьяКалькуляции,
	ЭтапПроизводства2_2ОбеспечениеМатериаламиИРаботами.Ссылка.Подразделение
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	Склады.Ссылка КАК Склад
ПОМЕСТИТЬ ВТ_Склады
ИЗ
	Справочник.Склады КАК Склады
ГДЕ
	Склады.Подразделение В ИЕРАРХИИ
			(ВЫБРАТЬ
				ВЫБОР
					КОГДА НЕ ВТ_материалыЭтапа.Подразделение.Родитель = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяССылка)
						ТОГДА ВТ_материалыЭтапа.Подразделение.Родитель
					ИНАЧЕ ВТ_материалыЭтапа.Подразделение
				КОНЕЦ КАК Подразделение
			ИЗ
				ВТ_материалыЭтапа КАК ВТ_материалыЭтапа
			СГРУППИРОВАТЬ ПО
				ВЫБОР
					КОГДА НЕ ВТ_материалыЭтапа.Подразделение.Родитель = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяССылка)
						ТОГДА ВТ_материалыЭтапа.Подразделение.Родитель
					ИНАЧЕ ВТ_материалыЭтапа.Подразделение
				КОНЕЦ)

СГРУППИРОВАТЬ ПО
	Склады.Ссылка
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_материалыЭтапа.Склад КАК Склад
ПОМЕСТИТЬ ВТ_СкладыЭтапов
ИЗ
	ВТ_материалыЭтапа КАК ВТ_материалыЭтапа

СГРУППИРОВАТЬ ПО
	ВТ_материалыЭтапа.Склад
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_Склады.Склад КАК Склад
ПОМЕСТИТЬ ВТ_СкладыОбщие_БезГруппировки
ИЗ
	ВТ_Склады КАК ВТ_Склады

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ВТ_СкладыЭтапов.Склад
ИЗ
	ВТ_СкладыЭтапов КАК ВТ_СкладыЭтапов
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_Склады.Склад КАК Склад,
	гиг_СоответствиеСкладовСхемамОбеспечения.СхемаОбеспечения КАК СхемаОбеспечения
ПОМЕСТИТЬ ВТ_СкладыОбщие
ИЗ
	ВТ_СкладыОбщие_БезГруппировки КАК ВТ_Склады
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.гиг_СоответствиеСкладовСхемамОбеспечения КАК гиг_СоответствиеСкладовСхемамОбеспечения
		ПО ВТ_Склады.Склад = гиг_СоответствиеСкладовСхемамОбеспечения.Склад

СГРУППИРОВАТЬ ПО
	ВТ_Склады.Склад,
	гиг_СоответствиеСкладовСхемамОбеспечения.СхемаОбеспечения
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	СхемыОбеспечения.Склад КАК Склад,
	СхемыОбеспечения.СпособОбеспеченияПотребностей.ИсточникОбеспеченияПотребностей КАК СпособОбеспеченияПотребностейИсточникОбеспеченияПотребностей,
	СхемыОбеспечения1.СхемаОбеспечения.ГИГ_СкладПоставщика КАК СхемаОбеспеченияГИГ_СкладПоставщика,
	СхемыОбеспечения1.СпособОбеспеченияПотребностей КАК СпособОбеспеченияПотребностей,
	СхемыОбеспечения1.СхемаОбеспечения КАК СхемаОбеспечения,
	СхемыОбеспечения1.СпособОбеспеченияПотребностей.СрокИсполненияЗаказа КАК СпособОбеспеченияПотребностейСрокИсполненияЗаказа,
	СхемыОбеспечения1.СпособОбеспеченияПотребностей.ГарантированныйСрокОтгрузки КАК СпособОбеспеченияПотребностейГарантированныйСрокОтгрузки
ПОМЕСТИТЬ ВТ_СхемыСоСроками
ИЗ
	РегистрСведений.СхемыОбеспечения КАК СхемыОбеспечения
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СхемыОбеспечения КАК СхемыОбеспечения1
		ПО СхемыОбеспечения.СпособОбеспеченияПотребностей.ИсточникОбеспеченияПотребностей = СхемыОбеспечения1.Склад
ГДЕ
	СхемыОбеспечения.Склад В
			(ВЫБРАТЬ
				ВТ_СкладыОбщие.Склад КАК Склад
			ИЗ
				ВТ_СкладыОбщие КАК ВТ_СкладыОбщие)

СГРУППИРОВАТЬ ПО
	СхемыОбеспечения.Склад,
	СхемыОбеспечения.СпособОбеспеченияПотребностей.ИсточникОбеспеченияПотребностей,
	СхемыОбеспечения1.СхемаОбеспечения.ГИГ_СкладПоставщика,
	СхемыОбеспечения1.СпособОбеспеченияПотребностей.ГарантированныйСрокОтгрузки,
	СхемыОбеспечения1.СпособОбеспеченияПотребностей,
	СхемыОбеспечения1.СпособОбеспеченияПотребностей.СрокИсполненияЗаказа,
	СхемыОбеспечения1.СхемаОбеспечения
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_материалыЭтапа.Номенклатура КАК Номенклатура,
	ВТ_материалыЭтапа.Характеристика КАК Характеристика,
	ВТ_материалыЭтапа.КоличествоУпаковок КАК КоличествоУпаковок,
	ВТ_СкладыОбщие.Склад КАК Склад,
	ВТ_материалыЭтапа.Этап КАК Этап,
	ВТ_материалыЭтапа.Заказ КАК Заказ,
	ВТ_материалыЭтапа.СтатьяКалькуляции КАК СтатьяКалькуляции
ПОМЕСТИТЬ ВТ_ЭтапыСоСкладами
ИЗ
	ВТ_материалыЭтапа КАК ВТ_материалыЭтапа,
	ВТ_СкладыОбщие КАК ВТ_СкладыОбщие

СГРУППИРОВАТЬ ПО
	ВТ_материалыЭтапа.Номенклатура,
	ВТ_материалыЭтапа.Характеристика,
	ВТ_материалыЭтапа.КоличествоУпаковок,
	ВТ_СкладыОбщие.Склад,
	ВТ_материалыЭтапа.Этап,
	ВТ_материалыЭтапа.Заказ,
	ВТ_материалыЭтапа.СтатьяКалькуляции
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_ЭтапыСоСкладами.Номенклатура КАК Номенклатура,
	ВТ_ЭтапыСоСкладами.Характеристика КАК Характеристика,
	ВТ_ЭтапыСоСкладами.КоличествоУпаковок КАК КоличествоУпаковок,
	ВТ_ЭтапыСоСкладами.Склад КАК Склад,
	ВТ_СхемыСоСроками.СпособОбеспеченияПотребностейИсточникОбеспеченияПотребностей КАК СкладИсточник,
	ВТ_СхемыСоСроками.СхемаОбеспеченияГИГ_СкладПоставщика КАК СхемаОбеспеченияГИГ_СкладПоставщика,
	ВТ_СхемыСоСроками.СпособОбеспеченияПотребностей КАК СпособОбеспеченияПотребностей,
	ВТ_СхемыСоСроками.СхемаОбеспечения КАК СхемаОбеспечения,
	ВТ_СхемыСоСроками.СпособОбеспеченияПотребностейСрокИсполненияЗаказа КАК СпособОбеспеченияПотребностейСрокИсполненияЗаказа,
	ВТ_СхемыСоСроками.СпособОбеспеченияПотребностейГарантированныйСрокОтгрузки КАК СпособОбеспеченияПотребностейГарантированныйСрокОтгрузки,
	ВТ_ЭтапыСоСкладами.Этап КАК Этап,
	ВТ_ЭтапыСоСкладами.Заказ КАК Заказ,
	ВТ_ЭтапыСоСкладами.СтатьяКалькуляции КАК СтатьяКалькуляции
ПОМЕСТИТЬ ВТ_ЭтапыСоСхемамиИСроками
ИЗ
	ВТ_ЭтапыСоСкладами КАК ВТ_ЭтапыСоСкладами
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_СхемыСоСроками КАК ВТ_СхемыСоСроками
		ПО ВТ_ЭтапыСоСкладами.Склад = ВТ_СхемыСоСроками.Склад
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_ЭтапыСоСхемамиИСроками.Склад КАК Склад,
	ВТ_ЭтапыСоСхемамиИСроками.Этап КАК Этап,
	ВТ_ЭтапыСоСхемамиИСроками.Заказ КАК Заказ,
	ВТ_ЭтапыСоСхемамиИСроками.СтатьяКалькуляции КАК СтатьяКалькуляции
ПОМЕСТИТЬ ВТ_СкладыДляОстатков
ИЗ
	ВТ_ЭтапыСоСхемамиИСроками КАК ВТ_ЭтапыСоСхемамиИСроками

СГРУППИРОВАТЬ ПО
	ВТ_ЭтапыСоСхемамиИСроками.Склад,
	ВТ_ЭтапыСоСхемамиИСроками.Этап,
	ВТ_ЭтапыСоСхемамиИСроками.Заказ,
	ВТ_ЭтапыСоСхемамиИСроками.СтатьяКалькуляции

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ВТ_ЭтапыСоСхемамиИСроками.СкладИсточник,
	ВТ_ЭтапыСоСхемамиИСроками.Этап,
	ВТ_ЭтапыСоСхемамиИСроками.Заказ,
	ВТ_ЭтапыСоСхемамиИСроками.СтатьяКалькуляции
ИЗ
	ВТ_ЭтапыСоСхемамиИСроками КАК ВТ_ЭтапыСоСхемамиИСроками

СГРУППИРОВАТЬ ПО
	ВТ_ЭтапыСоСхемамиИСроками.СкладИсточник,
	ВТ_ЭтапыСоСхемамиИСроками.Этап,
	ВТ_ЭтапыСоСхемамиИСроками.Заказ,
	ВТ_ЭтапыСоСхемамиИСроками.СтатьяКалькуляции
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	СвободныеОстаткиОстатки.Номенклатура КАК Номенклатура,
	СвободныеОстаткиОстатки.Характеристика КАК Характеристика,
	СвободныеОстаткиОстатки.Склад КАК Склад,
	ЕСТЬNULL(СвободныеОстаткиОстатки.ВНаличииОстаток, 0) - ЕСТЬNULL(СвободныеОстаткиОстатки.ВРезервеСоСкладаОстаток, 0) - ЕСТЬNULL(СвободныеОстаткиОстатки.ВРезервеПодЗаказОстаток, 0) КАК ВНаличииОстаток
ПОМЕСТИТЬ ВТ_СвободныеОстатки
ИЗ
	РегистрНакопления.СвободныеОстатки.Остатки(
			&amp;ДатаСреза,
			Номенклатура В
				(ВЫБРАТЬ
					ВТ_материалыЭтапа.Номенклатура КАК Номенклатура
				ИЗ
					ВТ_материалыЭтапа КАК ВТ_материалыЭтапа
				СГРУППИРОВАТЬ ПО
					ВТ_материалыЭтапа.Номенклатура)) КАК СвободныеОстаткиОстатки

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ДоступныеОстаткиПланируемыхПоступлений.Номенклатура,
	ДоступныеОстаткиПланируемыхПоступлений.Характеристика,
	ДоступныеОстаткиПланируемыхПоступлений.Склад,
	ДоступныеОстаткиПланируемыхПоступлений.Количество
ИЗ
	РегистрСведений.ДоступныеОстаткиПланируемыхПоступлений КАК ДоступныеОстаткиПланируемыхПоступлений
ГДЕ
	ДоступныеОстаткиПланируемыхПоступлений.Номенклатура В
			(ВЫБРАТЬ
				ВТ_материалыЭтапа.Номенклатура КАК Номенклатура
			ИЗ
				ВТ_материалыЭтапа КАК ВТ_материалыЭтапа
			СГРУППИРОВАТЬ ПО
				ВТ_материалыЭтапа.Номенклатура)
	И ДоступныеОстаткиПланируемыхПоступлений.ДатаДоступности = ДАТАВРЕМЯ(1, 1, 1)
	И ДоступныеОстаткиПланируемыхПоступлений.Количество &lt; 0
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ДоступныеОстаткиПланируемыхПоступлений.Номенклатура КАК Номенклатура,
	ДоступныеОстаткиПланируемыхПоступлений.Количество КАК Количество,
	ДоступныеОстаткиПланируемыхПоступлений.Склад КАК Склад,
	ДоступныеОстаткиПланируемыхПоступлений.ДатаДоступности КАК ДатаДоступности,
	ДоступныеОстаткиПланируемыхПоступлений.Характеристика КАК Характеристика,
	ВТ_СкладыДляОстатков.Этап КАК Этап,
	ВТ_СкладыДляОстатков.Заказ КАК Заказ,
	ВТ_СкладыДляОстатков.СтатьяКалькуляции КАК СтатьяКалькуляции
ПОМЕСТИТЬ ВТ_ДоступностьТоваров
ИЗ
	ВТ_СкладыДляОстатков КАК ВТ_СкладыДляОстатков
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ДоступныеОстаткиПланируемыхПоступлений КАК ДоступныеОстаткиПланируемыхПоступлений
		ПО ВТ_СкладыДляОстатков.Склад = ДоступныеОстаткиПланируемыхПоступлений.Склад
ГДЕ
	ДоступныеОстаткиПланируемыхПоступлений.Номенклатура В
			(ВЫБРАТЬ
				ВТ_материалыЭтапа.Номенклатура КАК Номенклатура
			ИЗ
				ВТ_материалыЭтапа КАК ВТ_материалыЭтапа
			СГРУППИРОВАТЬ ПО
				ВТ_материалыЭтапа.Номенклатура)
	И ДоступныеОстаткиПланируемыхПоступлений.ДатаДоступности &gt; ДАТАВРЕМЯ(1, 1, 1)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_СкладыДляОстатков.Склад КАК Склад,
	ВТ_СвободныеОстатки.Номенклатура КАК Номенклатура,
	ВТ_СвободныеОстатки.Характеристика КАК Характеристика,
	ВТ_СвободныеОстатки.ВНаличииОстаток КАК ВНаличииОстаток,
	ВТ_СкладыДляОстатков.Этап КАК Этап,
	ВТ_СкладыДляОстатков.Заказ КАК Заказ,
	ВТ_СкладыДляОстатков.СтатьяКалькуляции КАК СтатьяКалькуляции
ПОМЕСТИТЬ ВТ_ОстаткиНаСкладах
ИЗ
	ВТ_СкладыДляОстатков КАК ВТ_СкладыДляОстатков
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_СвободныеОстатки КАК ВТ_СвободныеОстатки
		ПО ВТ_СкладыДляОстатков.Склад = ВТ_СвободныеОстатки.Склад
ГДЕ
	ВТ_СвободныеОстатки.ВНаличииОстаток &lt;&gt; 0
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_материалыЭтапа.Номенклатура КАК Номенклатура,
	ВТ_материалыЭтапа.Характеристика КАК Характеристика,
	ВТ_материалыЭтапа.КоличествоУпаковок КАК КоличествоУпаковок,
	ВТ_материалыЭтапа.Склад КАК Склад,
	0 КАК ВНаличииОстаток,
	НАЧАЛОПЕРИОДА(&amp;ДатаСреза, ДЕНЬ) КАК ДатаОбеспеченияМин,
	КОНЕЦПЕРИОДА(&amp;ДатаСреза, ДЕНЬ) КАК ДатаОбеспеченияМакс,
	ВТ_материалыЭтапа.Этап КАК Этап,
	ВТ_материалыЭтапа.Заказ КАК Заказ,
	ВТ_материалыЭтапа.СтатьяКалькуляции КАК СтатьяКалькуляции,
	0 КАК ДнейПоставкиМин,
	0 КАК ДнейПоставкиМакс
ПОМЕСТИТЬ ВТ_ЭтапыСКоличествомОстатка
ИЗ
	ВТ_материалыЭтапа КАК ВТ_материалыЭтапа

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ВТ_ОстаткиНаСкладах.Номенклатура,
	ВТ_ОстаткиНаСкладах.Характеристика,
	0,
	ВТ_ОстаткиНаСкладах.Склад,
	ВТ_ОстаткиНаСкладах.ВНаличииОстаток,
	НАЧАЛОПЕРИОДА(&amp;ДатаСреза, ДЕНЬ),
	КОНЕЦПЕРИОДА(&amp;ДатаСреза, ДЕНЬ),
	ВТ_ОстаткиНаСкладах.Этап,
	ВТ_ОстаткиНаСкладах.Заказ,
	ВТ_ОстаткиНаСкладах.СтатьяКалькуляции,
	0,
	0
ИЗ
	ВТ_ОстаткиНаСкладах КАК ВТ_ОстаткиНаСкладах

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ВТ_ДоступностьТоваров.Номенклатура,
	ВТ_ДоступностьТоваров.Характеристика,
	0,
	"Обеспечивается в (пути)",
	ВТ_ДоступностьТоваров.Количество,
	НАЧАЛОПЕРИОДА(ВТ_ДоступностьТоваров.ДатаДоступности, ДЕНЬ),
	КОНЕЦПЕРИОДА(ВТ_ДоступностьТоваров.ДатаДоступности, ДЕНЬ),
	ВТ_ДоступностьТоваров.Этап,
	ВТ_ДоступностьТоваров.Заказ,
	ВТ_ДоступностьТоваров.СтатьяКалькуляции,
	0,
	0
ИЗ
	ВТ_ДоступностьТоваров КАК ВТ_ДоступностьТоваров
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_ЭтапыСКоличествомОстатка.Номенклатура КАК Номенклатура,
	ВТ_ЭтапыСКоличествомОстатка.Характеристика КАК Характеристика,
	МАКСИМУМ(ВТ_ЭтапыСКоличествомОстатка.КоличествоУпаковок) КАК КоличествоТребуется,
	ВТ_ЭтапыСКоличествомОстатка.Склад КАК Склад,
	МАКСИМУМ(ВТ_ЭтапыСКоличествомОстатка.ВНаличииОстаток) КАК КоличествоОстаток,
	МИНИМУМ(ВТ_ЭтапыСКоличествомОстатка.ДатаОбеспеченияМин) КАК СпособОбеспеченияПотребностейСрокИсполненияЗаказа,
	МАКСИМУМ(ВТ_ЭтапыСКоличествомОстатка.ДатаОбеспеченияМакс) КАК СпособОбеспеченияПотребностейГарантированныйСрокОтгрузки,
	МАКСИМУМ(ЗНАЧЕНИЕ(Справочник.ГИГ_СкладыПоставщиков.ПустаяСсылка)) КАК СхемаОбеспеченияГИГ_СкладПоставщика,
	ВТ_ЭтапыСКоличествомОстатка.Этап КАК Этап,
	ВТ_ЭтапыСКоличествомОстатка.Заказ КАК Заказ,
	ВТ_ЭтапыСКоличествомОстатка.СтатьяКалькуляции КАК СтатьяКалькуляции,
	МИНИМУМ(ВТ_ЭтапыСКоличествомОстатка.ДнейПоставкиМин) КАК ДнейПоставкиМин,
	МАКСИМУМ(ВТ_ЭтапыСКоличествомОстатка.ДнейПоставкиМакс) КАК ДнейПоставкиМакс,
	ЛОЖЬ КАК НеограниченныйЗапас,
	0 КАК Приоритет
ПОМЕСТИТЬ ВТ_ЭтапыСоСхемами
ИЗ
	ВТ_ЭтапыСКоличествомОстатка КАК ВТ_ЭтапыСКоличествомОстатка

СГРУППИРОВАТЬ ПО
	ВТ_ЭтапыСКоличествомОстатка.Номенклатура,
	ВТ_ЭтапыСКоличествомОстатка.Характеристика,
	ВТ_ЭтапыСКоличествомОстатка.Склад,
	ВТ_ЭтапыСКоличествомОстатка.Этап,
	ВТ_ЭтапыСКоличествомОстатка.Заказ,
	ВТ_ЭтапыСКоличествомОстатка.СтатьяКалькуляции

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ВТ_ЭтапыСоСхемамиИСроками.Номенклатура,
	ВТ_ЭтапыСоСхемамиИСроками.Характеристика,
	0,
	ВТ_ЭтапыСоСхемамиИСроками.СхемаОбеспечения,
	ГИГ_НоменклатураНаСкладеПоставщика.Количество,
	МИНИМУМ(ВЫБОР
			КОГДА ВТ_ЭтапыСоСхемамиИСроками.СхемаОбеспечения.ГИГ_ЗакупкаСПроизводства
				ТОГДА НАЧАЛОПЕРИОДА(ДОБАВИТЬКДАТЕ(&amp;ДатаСреза, ДЕНЬ, ЕСТЬNULL(ВТ_ЭтапыСоСхемамиИСроками.СпособОбеспеченияПотребностейСрокИсполненияЗаказа, 0) + ЕСТЬNULL(ГИГ_СрокиПоставкиНаСкладПоставщикаСПроизводства.СрокПоставки, 0)), ДЕНЬ)
			ИНАЧЕ НАЧАЛОПЕРИОДА(ДОБАВИТЬКДАТЕ(&amp;ДатаСреза, ДЕНЬ, ЕСТЬNULL(ВТ_ЭтапыСоСхемамиИСроками.СпособОбеспеченияПотребностейСрокИсполненияЗаказа, 0)), ДЕНЬ)
		КОНЕЦ),
	МАКСИМУМ(ВЫБОР
			КОГДА ВТ_ЭтапыСоСхемамиИСроками.СхемаОбеспечения.ГИГ_ЗакупкаСПроизводства
				ТОГДА КОНЕЦПЕРИОДА(ДОБАВИТЬКДАТЕ(&amp;ДатаСреза, ДЕНЬ, ЕСТЬNULL(ВТ_ЭтапыСоСхемамиИСроками.СпособОбеспеченияПотребностейГарантированныйСрокОтгрузки, 0) + ЕСТЬNULL(ГИГ_СрокиПоставкиНаСкладПоставщикаСПроизводства.СрокПоставки, 0)), ДЕНЬ)
			ИНАЧЕ КОНЕЦПЕРИОДА(ДОБАВИТЬКДАТЕ(&amp;ДатаСреза, ДЕНЬ, ВТ_ЭтапыСоСхемамиИСроками.СпособОбеспеченияПотребностейГарантированныйСрокОтгрузки), ДЕНЬ)
		КОНЕЦ),
	ВТ_ЭтапыСоСхемамиИСроками.СхемаОбеспеченияГИГ_СкладПоставщика,
	ВТ_ЭтапыСоСхемамиИСроками.Этап,
	ВТ_ЭтапыСоСхемамиИСроками.Заказ,
	ВТ_ЭтапыСоСхемамиИСроками.СтатьяКалькуляции,
	МИНИМУМ(ВЫБОР
			КОГДА ВТ_ЭтапыСоСхемамиИСроками.СхемаОбеспечения.ГИГ_ЗакупкаСПроизводства
				ТОГДА ЕСТЬNULL(ВТ_ЭтапыСоСхемамиИСроками.СпособОбеспеченияПотребностейСрокИсполненияЗаказа, 0) + ЕСТЬNULL(ГИГ_СрокиПоставкиНаСкладПоставщикаСПроизводства.СрокПоставки, 0)
			ИНАЧЕ ЕСТЬNULL(ВТ_ЭтапыСоСхемамиИСроками.СпособОбеспеченияПотребностейСрокИсполненияЗаказа, 0)
		КОНЕЦ),
	МАКСИМУМ(ВЫБОР
			КОГДА ВТ_ЭтапыСоСхемамиИСроками.СхемаОбеспечения.ГИГ_ЗакупкаСПроизводства
				ТОГДА ЕСТЬNULL(ВТ_ЭтапыСоСхемамиИСроками.СпособОбеспеченияПотребностейГарантированныйСрокОтгрузки, 0) + ЕСТЬNULL(ГИГ_СрокиПоставкиНаСкладПоставщикаСПроизводства.СрокПоставки, 0)
			ИНАЧЕ ЕСТЬNULL(ВТ_ЭтапыСоСхемамиИСроками.СпособОбеспеченияПотребностейГарантированныйСрокОтгрузки, 0)
		КОНЕЦ),
	ВЫБОР
		КОГДА ВТ_ЭтапыСоСхемамиИСроками.СхемаОбеспечения.ГИГ_ЗакупкаСПроизводства
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ,
	1 + ВТ_ЭтапыСоСхемамиИСроками.СхемаОбеспечения.ГИГ_Приоритет
ИЗ
	ВТ_ЭтапыСоСхемамиИСроками КАК ВТ_ЭтапыСоСхемамиИСроками
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ГИГ_СрокиПоставкиНаСкладПоставщикаСПроизводства КАК ГИГ_СрокиПоставкиНаСкладПоставщикаСПроизводства
		ПО ВТ_ЭтапыСоСхемамиИСроками.Номенклатура = ГИГ_СрокиПоставкиНаСкладПоставщикаСПроизводства.Номенклатура
			И ВТ_ЭтапыСоСхемамиИСроками.Характеристика = ГИГ_СрокиПоставкиНаСкладПоставщикаСПроизводства.Характеристика
			И ВТ_ЭтапыСоСхемамиИСроками.СхемаОбеспеченияГИГ_СкладПоставщика = ГИГ_СрокиПоставкиНаСкладПоставщикаСПроизводства.СкладПоставщика
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ГИГ_НоменклатураНаСкладеПоставщика КАК ГИГ_НоменклатураНаСкладеПоставщика
		ПО ВТ_ЭтапыСоСхемамиИСроками.Номенклатура = ГИГ_НоменклатураНаСкладеПоставщика.Номенклатура
			И ВТ_ЭтапыСоСхемамиИСроками.Характеристика = ГИГ_НоменклатураНаСкладеПоставщика.Характеристика
			И ВТ_ЭтапыСоСхемамиИСроками.СхемаОбеспеченияГИГ_СкладПоставщика = ГИГ_НоменклатураНаСкладеПоставщика.Склад
ГДЕ
	ВТ_ЭтапыСоСхемамиИСроками.СхемаОбеспечения В
			(ВЫБРАТЬ
				ВТ_СкладыОбщие.СхемаОбеспечения КАК СхемаОбеспечения
			ИЗ
				ВТ_СкладыОбщие КАК ВТ_СкладыОбщие)

СГРУППИРОВАТЬ ПО
	ВТ_ЭтапыСоСхемамиИСроками.Номенклатура,
	ВТ_ЭтапыСоСхемамиИСроками.Характеристика,
	ВТ_ЭтапыСоСхемамиИСроками.СхемаОбеспечения,
	ВТ_ЭтапыСоСхемамиИСроками.СхемаОбеспеченияГИГ_СкладПоставщика,
	ВТ_ЭтапыСоСхемамиИСроками.Этап,
	ВТ_ЭтапыСоСхемамиИСроками.Заказ,
	ВТ_ЭтапыСоСхемамиИСроками.СтатьяКалькуляции,
	ВЫБОР
		КОГДА ВТ_ЭтапыСоСхемамиИСроками.СхемаОбеспечения.ГИГ_ЗакупкаСПроизводства
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ,
	1 + ВТ_ЭтапыСоСхемамиИСроками.СхемаОбеспечения.ГИГ_Приоритет,
	ГИГ_НоменклатураНаСкладеПоставщика.Количество
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_ЭтапыСоСхемами.Номенклатура КАК Номенклатура,
	ВТ_ЭтапыСоСхемами.Характеристика КАК Характеристика,
	МАКСИМУМ(ВТ_ЭтапыСоСхемами.КоличествоТребуется) КАК КоличествоТребуется
ПОМЕСТИТЬ ВТ_ТребуетсяПоНоменклатуре
ИЗ
	ВТ_ЭтапыСоСхемами КАК ВТ_ЭтапыСоСхемами

СГРУППИРОВАТЬ ПО
	ВТ_ЭтапыСоСхемами.Номенклатура,
	ВТ_ЭтапыСоСхемами.Характеристика
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_ЭтапыСоСхемами.Заказ КАК Заказ,
	ВТ_ЭтапыСоСхемами.Этап КАК Этап,
	ВТ_ЭтапыСоСхемами.СтатьяКалькуляции КАК СтатьяКалькуляции,
	ВТ_ЭтапыСоСхемами.Номенклатура КАК Номенклатура,
	ВТ_ЭтапыСоСхемами.Характеристика КАК Характеристика,
	ВТ_ЭтапыСоСхемами.Склад КАК Склад,
	СУММА(ВТ_ЭтапыСоСхемами.КоличествоОстаток) КАК КоличествоОстаток,
	СУММА(ГИГ_НоменклатураНаСкладеПоставщика.Количество) КАК КоличествоНаСкладеПоставщика,
	ВТ_ЭтапыСоСхемами.СпособОбеспеченияПотребностейСрокИсполненияЗаказа КАК СпособОбеспеченияПотребностейСрокИсполненияЗаказа,
	ВТ_ЭтапыСоСхемами.СпособОбеспеченияПотребностейГарантированныйСрокОтгрузки КАК СпособОбеспеченияПотребностейГарантированныйСрокОтгрузки,
	ВТ_ТребуетсяПоНоменклатуре.КоличествоТребуется КАК КоличествоТребуется,
	ВТ_ЭтапыСоСхемами.ДнейПоставкиМин КАК ДнейПоставкиМин,
	ВТ_ЭтапыСоСхемами.ДнейПоставкиМакс КАК ДнейПоставкиМакс,
	ВТ_ЭтапыСоСхемами.НеограниченныйЗапас КАК НеограниченныйЗапас,
	ВТ_ЭтапыСоСхемами.Приоритет КАК Приоритет
ПОМЕСТИТЬ ВТ_Конечная
ИЗ
	ВТ_ЭтапыСоСхемами КАК ВТ_ЭтапыСоСхемами
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ГИГ_НоменклатураНаСкладеПоставщика КАК ГИГ_НоменклатураНаСкладеПоставщика
		ПО ВТ_ЭтапыСоСхемами.Номенклатура = ГИГ_НоменклатураНаСкладеПоставщика.Номенклатура
			И ВТ_ЭтапыСоСхемами.Характеристика = ГИГ_НоменклатураНаСкладеПоставщика.Характеристика
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ТребуетсяПоНоменклатуре КАК ВТ_ТребуетсяПоНоменклатуре
		ПО ВТ_ЭтапыСоСхемами.Номенклатура = ВТ_ТребуетсяПоНоменклатуре.Номенклатура
			И ВТ_ЭтапыСоСхемами.Характеристика = ВТ_ТребуетсяПоНоменклатуре.Характеристика

СГРУППИРОВАТЬ ПО
	ВТ_ЭтапыСоСхемами.Заказ,
	ВТ_ЭтапыСоСхемами.Этап,
	ВТ_ЭтапыСоСхемами.СтатьяКалькуляции,
	ВТ_ЭтапыСоСхемами.Номенклатура,
	ВТ_ЭтапыСоСхемами.Характеристика,
	ВТ_ЭтапыСоСхемами.Склад,
	ВТ_ЭтапыСоСхемами.СпособОбеспеченияПотребностейСрокИсполненияЗаказа,
	ВТ_ЭтапыСоСхемами.СпособОбеспеченияПотребностейГарантированныйСрокОтгрузки,
	ВТ_ТребуетсяПоНоменклатуре.КоличествоТребуется,
	ВТ_ЭтапыСоСхемами.ДнейПоставкиМин,
	ВТ_ЭтапыСоСхемами.ДнейПоставкиМакс,
	ВТ_ЭтапыСоСхемами.НеограниченныйЗапас,
	ВТ_ЭтапыСоСхемами.Приоритет
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_Конечная.Заказ КАК Заказ,
	ВТ_Конечная.Этап КАК Этап,
	ВТ_Конечная.СтатьяКалькуляции КАК СтатьяКалькуляции,
	ВТ_Конечная.Номенклатура КАК Номенклатура,
	ВТ_Конечная.Характеристика КАК Характеристика,
	ВТ_Конечная.Склад КАК Склад,
	ВТ_Конечная.КоличествоОстаток КАК КоличествоОстаток,
	ВТ_Конечная.КоличествоНаСкладеПоставщика КАК КоличествоНаСкладеПоставщика,
	ВТ_Конечная.СпособОбеспеченияПотребностейСрокИсполненияЗаказа КАК СпособОбеспеченияПотребностейСрокИсполненияЗаказа,
	ВТ_Конечная.СпособОбеспеченияПотребностейГарантированныйСрокОтгрузки КАК СпособОбеспеченияПотребностейГарантированныйСрокОтгрузки,
	ВТ_Конечная.КоличествоТребуется КАК КоличествоТребуется,
	ВТ_Конечная.ДнейПоставкиМин КАК ДнейПоставкиМин,
	ВТ_Конечная.ДнейПоставкиМакс КАК ДнейПоставкиМакс,
	ВТ_Конечная.НеограниченныйЗапас КАК НеограниченныйЗапас,
	ВТ_Конечная.Приоритет КАК Приоритет
ИЗ
	ВТ_материалыЭтапа КАК ВТ_материалыЭтапа
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВТ_Конечная КАК ВТ_Конечная
		ПО ВТ_материалыЭтапа.Этап = ВТ_Конечная.Этап
			И ВТ_материалыЭтапа.Номенклатура = ВТ_Конечная.Номенклатура
			И ВТ_материалыЭтапа.Характеристика = ВТ_Конечная.Характеристика
			И ВТ_материалыЭтапа.СтатьяКалькуляции = ВТ_Конечная.СтатьяКалькуляции
ГДЕ
	(ВТ_Конечная.КоличествоОстаток &lt;&gt; 0
			ИЛИ ВТ_Конечная.НеограниченныйЗапас)

УПОРЯДОЧИТЬ ПО
	Приоритет,
	СпособОбеспеченияПотребностейСрокИсполненияЗаказа</query>
	</dataSet>
	<dataSetLink>
		<sourceDataSet/>
		<destinationDataSet/>
		<sourceExpression/>
		<destinationExpression/>
	</dataSetLink>
	<calculatedField>
		<dataPath>ДатыПоставкиСтрокой</dataPath>
		<expression>ВЫБОР КОГДА  ДнейПоставкиМакс &lt;&gt; 0 ТОГДА Строка(ДнейПоставкиМин) + " - " + Строка(ДнейПоставкиМакс) + " дн." ИНАЧЕ "" КОНЕЦ</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Срок поставки</v8:content>
			</v8:item>
		</title>
	</calculatedField>
	<calculatedField>
		<dataPath>КоличествоНаОстатках</dataPath>
		<expression>Выбор КОГДА НеограниченныйЗапас ТОГДА "∞" Иначе КоличествоОстаток КОНЕЦ</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Остаток</v8:content>
			</v8:item>
		</title>
		<appearance>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>ГоризонтальноеПоложение</dcscor:parameter>
				<dcscor:value xsi:type="v8ui:HorizontalAlign">Left</dcscor:value>
			</dcscor:item>
		</appearance>
	</calculatedField>
	<calculatedField>
		<dataPath>КоличествоПоНоменклатуре</dataPath>
		<expression>0</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Требуется</v8:content>
			</v8:item>
		</title>
	</calculatedField>
	<totalField>
		<dataPath>СпособОбеспеченияПотребностейСрокИсполненияЗаказа</dataPath>
		<expression>Минимум(СпособОбеспеченияПотребностейСрокИсполненияЗаказа)</expression>
		<group>Заказ</group>
		<group>Номенклатура</group>
		<group>Этап</group>
	</totalField>
	<totalField>
		<dataPath>СпособОбеспеченияПотребностейГарантированныйСрокОтгрузки</dataPath>
		<expression>Максимум(СпособОбеспеченияПотребностейГарантированныйСрокОтгрузки)</expression>
		<group>Заказ</group>
		<group>Номенклатура</group>
		<group>Этап</group>
	</totalField>
	<totalField>
		<dataPath>СпособОбеспеченияПотребностейСрокИсполненияЗаказа</dataPath>
		<expression>0</expression>
		<group>СтатьяКалькуляции</group>
	</totalField>
	<totalField>
		<dataPath>СпособОбеспеченияПотребностейГарантированныйСрокОтгрузки</dataPath>
		<expression>0</expression>
		<group>СтатьяКалькуляции</group>
	</totalField>
	<parameter>
		<name>Период</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Период</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>false</useRestriction>
	</parameter>
	<parameter>
		<name>ДатаСреза</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Дата среза</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>false</useRestriction>
	</parameter>
	<parameter>
		<name>СписокЗаказов</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Список документов</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:DocumentRef.ЭтапПроизводства2_2</v8:Type>
		</valueType>
		<useRestriction>false</useRestriction>
		<valueListAllowed>true</valueListAllowed>
	</parameter>
	<template>
		<name>Макет1</name>
		<template xmlns:dcsat="http://v8.1c.ru/8.1/data-composition-system/area-template" xsi:type="dcsat:AreaTemplate">
			<dcsat:item xsi:type="dcsat:TableRow">
				<dcsat:tableCell>
					<dcsat:item xsi:type="dcsat:Field">
						<dcsat:value xsi:type="dcscor:Parameter">СпособОбеспеченияПотребностейСрокИсполненияЗаказа</dcsat:value>
					</dcsat:item>
					<dcsat:appearance>
						<dcscor:item>
							<dcscor:parameter>Расшифровка</dcscor:parameter>
							<dcscor:value xsi:type="dcscor:Parameter">СпособОбеспеченияПотребностейСрокИсполненияЗаказаРасшифровка</dcscor:value>
						</dcscor:item>
					</dcsat:appearance>
				</dcsat:tableCell>
			</dcsat:item>
		</template>
		<parameter xmlns:dcsat="http://v8.1c.ru/8.1/data-composition-system/area-template" xsi:type="dcsat:ExpressionAreaTemplateParameter">
			<dcsat:name>СпособОбеспеченияПотребностейСрокИсполненияЗаказа</dcsat:name>
			<dcsat:expression>СпособОбеспеченияПотребностейСрокИсполненияЗаказа</dcsat:expression>
		</parameter>
		<parameter xmlns:dcsat="http://v8.1c.ru/8.1/data-composition-system/area-template" xsi:type="dcsat:DetailsAreaTemplateParameter">
			<dcsat:name>СпособОбеспеченияПотребностейСрокИсполненияЗаказаРасшифровка</dcsat:name>
			<dcsat:fieldExpression>
				<dcsat:field>СпособОбеспеченияПотребностейСрокИсполненияЗаказа</dcsat:field>
				<dcsat:expression>СпособОбеспеченияПотребностейСрокИсполненияЗаказа</dcsat:expression>
			</dcsat:fieldExpression>
			<dcsat:mainAction>DrillDown</dcsat:mainAction>
		</parameter>
	</template>
	<template>
		<name>Макет2</name>
		<template xmlns:dcsat="http://v8.1c.ru/8.1/data-composition-system/area-template" xsi:type="dcsat:AreaTemplate">
			<dcsat:item xsi:type="dcsat:TableRow">
				<dcsat:tableCell>
					<dcsat:item xsi:type="dcsat:Field">
						<dcsat:value xsi:type="dcscor:Parameter">СпособОбеспеченияПотребностейГарантированныйСрокОтгрузки</dcsat:value>
					</dcsat:item>
					<dcsat:appearance>
						<dcscor:item>
							<dcscor:parameter>Расшифровка</dcscor:parameter>
							<dcscor:value xsi:type="dcscor:Parameter">СпособОбеспеченияПотребностейГарантированныйСрокОтгрузкиРасшифровка</dcscor:value>
						</dcscor:item>
					</dcsat:appearance>
				</dcsat:tableCell>
			</dcsat:item>
		</template>
		<parameter xmlns:dcsat="http://v8.1c.ru/8.1/data-composition-system/area-template" xsi:type="dcsat:ExpressionAreaTemplateParameter">
			<dcsat:name>СпособОбеспеченияПотребностейГарантированныйСрокОтгрузки</dcsat:name>
			<dcsat:expression>СпособОбеспеченияПотребностейГарантированныйСрокОтгрузки</dcsat:expression>
		</parameter>
		<parameter xmlns:dcsat="http://v8.1c.ru/8.1/data-composition-system/area-template" xsi:type="dcsat:DetailsAreaTemplateParameter">
			<dcsat:name>СпособОбеспеченияПотребностейГарантированныйСрокОтгрузкиРасшифровка</dcsat:name>
			<dcsat:fieldExpression>
				<dcsat:field>СпособОбеспеченияПотребностейГарантированныйСрокОтгрузки</dcsat:field>
				<dcsat:expression>СпособОбеспеченияПотребностейГарантированныйСрокОтгрузки</dcsat:expression>
			</dcsat:fieldExpression>
		</parameter>
	</template>
	<fieldTemplate>
		<field>СпособОбеспеченияПотребностейСрокИсполненияЗаказа</field>
		<template>Макет1</template>
	</fieldTemplate>
	<fieldTemplate>
		<field>СпособОбеспеченияПотребностейГарантированныйСрокОтгрузки</field>
		<template>Макет2</template>
	</fieldTemplate>
	<settingsVariant>
		<dcsset:name>ОсновнойДляОбеспечения</dcsset:name>
		<dcsset:presentation xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>ОсновнойдляОбеспечения</v8:content>
			</v8:item>
		</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СпособОбеспеченияПотребностейСрокИсполненияЗаказа</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СпособОбеспеченияПотребностейГарантированныйСрокОтгрузки</dcsset:field>
				</dcsset:item>
			</dcsset:selection>
			<dcsset:dataParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>ДатаСреза</dcscor:parameter>
					<dcscor:value xsi:type="xs:dateTime">0001-01-01T00:00:00</dcscor:value>
					<dcsset:userSettingID>d319457e-8954-4d66-bcc2-e7592c90c27a</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>СписокЗаказов</dcscor:parameter>
					<dcscor:value xsi:nil="true"/>
					<dcsset:userSettingID>1a647c93-0928-4093-8573-d063cd8b0801</dcsset:userSettingID>
				</dcscor:item>
			</dcsset:dataParameters>
			<dcsset:order>
				<dcsset:item xsi:type="dcsset:OrderItemField">
					<dcsset:field>Приоритет</dcsset:field>
					<dcsset:orderType>Asc</dcsset:orderType>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:OrderItemField">
					<dcsset:field>СпособОбеспеченияПотребностейСрокИсполненияЗаказа</dcsset:field>
					<dcsset:orderType>Asc</dcsset:orderType>
				</dcsset:item>
			</dcsset:order>
			<dcsset:conditionalAppearance>
				<dcsset:item>
					<dcsset:selection>
						<dcsset:item>
							<dcsset:field>КоличествоТребуется</dcsset:field>
						</dcsset:item>
					</dcsset:selection>
					<dcsset:filter>
						<dcsset:item xsi:type="dcsset:FilterItemComparison">
							<dcsset:left xsi:type="dcscor:Field">КоличествоТребуется</dcsset:left>
							<dcsset:comparisonType>NotEqual</dcsset:comparisonType>
							<dcsset:right xsi:type="xs:decimal">0</dcsset:right>
						</dcsset:item>
					</dcsset:filter>
					<dcsset:appearance>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ГоризонтальноеПоложение</dcscor:parameter>
							<dcscor:value xsi:type="v8ui:HorizontalAlign">Left</dcscor:value>
						</dcscor:item>
					</dcsset:appearance>
				</dcsset:item>
			</dcsset:conditionalAppearance>
			<dcsset:outputParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>РасположениеРеквизитов</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionAttributesPlacement">WithOwnerField</dcscor:value>
				</dcscor:item>
			</dcsset:outputParameters>
			<dcsset:item xsi:type="dcsset:StructureItemGroup">
				<dcsset:groupItems>
					<dcsset:item xsi:type="dcsset:GroupItemField">
						<dcsset:field>Заказ</dcsset:field>
						<dcsset:groupType>Items</dcsset:groupType>
						<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
						<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
						<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
					</dcsset:item>
				</dcsset:groupItems>
				<dcsset:order>
					<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
				</dcsset:order>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
				</dcsset:selection>
				<dcsset:item xsi:type="dcsset:StructureItemGroup">
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>Этап</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					</dcsset:selection>
					<dcsset:item xsi:type="dcsset:StructureItemGroup">
						<dcsset:groupItems>
							<dcsset:item xsi:type="dcsset:GroupItemField">
								<dcsset:field>СтатьяКалькуляции</dcsset:field>
								<dcsset:groupType>Items</dcsset:groupType>
								<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
								<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
								<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
							</dcsset:item>
						</dcsset:groupItems>
						<dcsset:order>
							<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
						</dcsset:order>
						<dcsset:selection>
							<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
						</dcsset:selection>
						<dcsset:item xsi:type="dcsset:StructureItemGroup">
							<dcsset:groupItems>
								<dcsset:item xsi:type="dcsset:GroupItemField">
									<dcsset:field>Номенклатура</dcsset:field>
									<dcsset:groupType>Items</dcsset:groupType>
									<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
									<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
									<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
								</dcsset:item>
								<dcsset:item xsi:type="dcsset:GroupItemField">
									<dcsset:field>КоличествоТребуется</dcsset:field>
									<dcsset:groupType>Items</dcsset:groupType>
									<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
									<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
									<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
								</dcsset:item>
							</dcsset:groupItems>
							<dcsset:order>
								<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
							</dcsset:order>
							<dcsset:selection>
								<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
							</dcsset:selection>
							<dcsset:item xsi:type="dcsset:StructureItemGroup">
								<dcsset:groupItems>
									<dcsset:item xsi:type="dcsset:GroupItemField">
										<dcsset:field>Склад</dcsset:field>
										<dcsset:groupType>Items</dcsset:groupType>
										<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
										<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
										<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
									</dcsset:item>
									<dcsset:item xsi:type="dcsset:GroupItemField">
										<dcsset:field>КоличествоПоНоменклатуре</dcsset:field>
										<dcsset:groupType>Items</dcsset:groupType>
										<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
										<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
										<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
									</dcsset:item>
									<dcsset:item xsi:type="dcsset:GroupItemField">
										<dcsset:field>КоличествоНаОстатках</dcsset:field>
										<dcsset:groupType>Items</dcsset:groupType>
										<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
										<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
										<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
									</dcsset:item>
									<dcsset:item xsi:type="dcsset:GroupItemField">
										<dcsset:field>ДатыПоставкиСтрокой</dcsset:field>
										<dcsset:groupType>Items</dcsset:groupType>
										<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
										<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
										<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
									</dcsset:item>
									<dcsset:item xsi:type="dcsset:GroupItemField">
										<dcsset:field>Приоритет</dcsset:field>
										<dcsset:groupType>Items</dcsset:groupType>
										<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
										<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
										<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
									</dcsset:item>
								</dcsset:groupItems>
								<dcsset:order>
									<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
								</dcsset:order>
								<dcsset:selection>
									<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
								</dcsset:selection>
							</dcsset:item>
						</dcsset:item>
					</dcsset:item>
				</dcsset:item>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>